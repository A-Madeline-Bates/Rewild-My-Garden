{"ast":null,"code":"import { Subscription } from \"rxjs\";\nimport { ProximityEnvironment } from \"../proximity-env\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../services/all-answers.service\";\nexport let NearYouComponentComponent = /*#__PURE__*/(() => {\n  class NearYouComponentComponent {\n    constructor(httpClient, allAnswersService) {\n      this.httpClient = httpClient;\n      this.allAnswersService = allAnswersService; //Subscriptions to wildlife answers data\n\n      this.userSubOne = new Subscription();\n      this.userSubTwo = new Subscription();\n      this.userSubThree = new Subscription();\n      this.ourAnswersService = new Subscription();\n      this.latitude = 0;\n      this.longitude = 0;\n      this.adviceOne = {\n        Header: \"\",\n        Pathname: \"\",\n        Justification: \"\",\n        BodyText: \"\",\n        Name: \"\",\n        Username: \"\",\n        Copyright: \"\",\n        Link: \"\"\n      };\n      this.adviceTwo = {\n        Header: \"\",\n        Pathname: \"\",\n        Justification: \"\",\n        BodyText: \"\",\n        Name: \"\",\n        Username: \"\",\n        Copyright: \"\",\n        Link: \"\"\n      };\n      this.adviceThree = {\n        Header: \"\",\n        Pathname: \"\",\n        Justification: \"\",\n        BodyText: \"\",\n        Name: \"\",\n        Username: \"\",\n        Copyright: \"\",\n        Link: \"\"\n      };\n      this.displayArray = [this.adviceOne, this.adviceTwo, this.adviceThree];\n      this.ourAnswersService = this.allAnswersService.getAnswerUpdateListener().subscribe(retrievedAnswers => {\n        this.latitude = retrievedAnswers.latitude;\n        this.longitude = retrievedAnswers.longitude;\n        this.setUserDataInspo(ProximityEnvironment.INSPIRATION_PROXIMITY);\n        this.setUserUsefulClose(ProximityEnvironment.USEFUL_PROXIMITY);\n        this.setUserDataClose(ProximityEnvironment.CLOSEST);\n      });\n    }\n\n    setUserDataInspo(proximity) {\n      this.userSubOne = this.httpClient.get(\"https://rewildmygarden-api.azurewebsites.net/api/userData?Distance=\" + proximity + \"&Longitude=\" + this.longitude + \"&Latitude=\" + this.latitude).subscribe(response => {\n        const inspoArray = [];\n        let count = 0;\n\n        for (let i = 0; i < response.length; i++) {\n          let ourUserData = response[i];\n\n          for (let j = 0; j < ourUserData.properties.savedAdvice.length; j++) {\n            inspoArray[count] = {\n              Header: ourUserData.properties.savedAdvice[j].Header,\n              Pathname: ourUserData.properties.savedAdvice[j].Pathname,\n              Justification: ourUserData.properties.savedAdvice[j].Justification,\n              BodyText: ourUserData.properties.savedAdvice[j].BodyText,\n              Name: ourUserData.properties.savedAdvice[j].Name,\n              Username: ourUserData.properties.savedAdvice[j].Username,\n              Copyright: ourUserData.properties.savedAdvice[j].Copyright,\n              Link: ourUserData.properties.savedAdvice[j].Link\n            };\n            count++;\n          }\n        } //If noone is detected in our largest radius we won't find anybody- so display default box\n\n\n        if (inspoArray.length == 0) {\n          document.getElementById(\"NooneNear\").classList.remove(\"hiddenElem\");\n        } //otherwise there are other users to be inspired by- display data\n        else {\n          //we don't want more than three examples- limited by inspoArray.length or 3, whichever comes first\n          for (let m = 0; m < inspoArray.length && m < 3; m++) {\n            this.displayArray[m] = inspoArray[m];\n            document.getElementById(\"Inspiration\").classList.remove(\"hiddenElem\");\n            document.getElementById(\"SingleAdvice\" + m).classList.remove(\"hiddenElem\");\n          }\n        }\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    setUserUsefulClose(proximity) {\n      this.userSubTwo = this.httpClient.get(\"https://rewildmygarden-api.azurewebsites.net/api/userData?Distance=\" + proximity + \"&Longitude=\" + this.longitude + \"&Latitude=\" + this.latitude).subscribe(response => {\n        const closeArray = [];\n        let count = 0;\n\n        for (let i = 0; i < response.length; i++) {\n          let ourUserData = response[i];\n\n          for (let j = 0; j < ourUserData.properties.savedAdvice.length; j++) {\n            closeArray[count] = {\n              Header: ourUserData.properties.savedAdvice[j].Header,\n              Pathname: ourUserData.properties.savedAdvice[j].Pathname,\n              Justification: ourUserData.properties.savedAdvice[j].Justification,\n              BodyText: ourUserData.properties.savedAdvice[j].BodyText,\n              Name: ourUserData.properties.savedAdvice[j].Name,\n              Username: ourUserData.properties.savedAdvice[j].Username,\n              Copyright: ourUserData.properties.savedAdvice[j].Copyright,\n              Link: ourUserData.properties.savedAdvice[j].Link\n            };\n            count++;\n          }\n        }\n\n        if (closeArray.length != 0) {\n          for (let n = 0; n < closeArray.length; n++) {\n            if (closeArray[n].Header == \"Put in a Small Water Feature\" || closeArray[n].Header == \"Create a Container Water Feature\" || closeArray[n].Header == \"Put in a Pond\") document.getElementById(\"PondDistance\").classList.remove(\"hiddenElem\");\n          }\n        }\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    setUserDataClose(proximity) {\n      this.userSubThree = this.httpClient.get(\"https://rewildmygarden-api.azurewebsites.net/api/userData?Distance=\" + proximity + \"&Longitude=\" + this.longitude + \"&Latitude=\" + this.latitude).subscribe(response => {\n        const closeArray = [];\n        let count = 0;\n\n        for (let i = 0; i < response.length; i++) {\n          let ourUserData = response[i];\n\n          for (let j = 0; j < ourUserData.properties.savedAdvice.length; j++) {\n            closeArray[count] = {\n              Header: ourUserData.properties.savedAdvice[j].Header,\n              Pathname: ourUserData.properties.savedAdvice[j].Pathname,\n              Justification: ourUserData.properties.savedAdvice[j].Justification,\n              BodyText: ourUserData.properties.savedAdvice[j].BodyText,\n              Name: ourUserData.properties.savedAdvice[j].Name,\n              Username: ourUserData.properties.savedAdvice[j].Username,\n              Copyright: ourUserData.properties.savedAdvice[j].Copyright,\n              Link: ourUserData.properties.savedAdvice[j].Link\n            };\n            count++;\n          }\n        }\n\n        if (closeArray.length != 0) {\n          for (let n = 0; n < closeArray.length; n++) {\n            if (closeArray[n].Header == \"Create a Hedgehog Hole Highway\") document.getElementById(\"HedgehogDistance\").classList.remove(\"hiddenElem\");\n          }\n        }\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    ngOnInit() {} //This is called whenever this component is about to be removed from the DOM\n\n\n    ngOnDestroy() {\n      //By calling our subscription at this point and unsubscribing, we are preventing memory leaks\n      this.userSubOne.unsubscribe();\n      this.userSubTwo.unsubscribe();\n      this.userSubThree.unsubscribe();\n      this.ourAnswersService.unsubscribe();\n    }\n\n  }\n\n  NearYouComponentComponent.ɵfac = function NearYouComponentComponent_Factory(t) {\n    return new (t || NearYouComponentComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AllAnswers));\n  };\n\n  NearYouComponentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NearYouComponentComponent,\n    selectors: [[\"app-near-you-component\"]],\n    hostBindings: function NearYouComponentComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"unloaded\", function NearYouComponentComponent_unloaded_HostBindingHandler() {\n          return ctx.ngOnDestroy();\n        });\n      }\n    },\n    decls: 51,\n    vars: 6,\n    consts: [[\"id\", \"NooneNear\", 1, \"hiddenElem\"], [1, \"card\"], [\"src\", \"/assets/publicdomain_park.jpeg\", \"alt\", \"Park\", 1, \"leftImage\"], [1, \"card-body\"], [1, \"Subheader\"], [1, \"card-text\"], [\"id\", \"Inspiration\", 1, \"hiddenElem\"], [1, \"cardElements\"], [\"id\", \"SingleAdvice0\", 1, \"hiddenElem\"], [1, \"item\"], [\"alt\", \"advice_image\", 3, \"src\"], [1, \"caption\"], [\"id\", \"SingleAdvice1\", 1, \"hiddenElem\"], [\"id\", \"SingleAdvice2\", 1, \"hiddenElem\"], [\"id\", \"PondDistance\", 1, \"hiddenElem\"], [\"src\", \"/assets/advice_box_images/pond.jpeg\", \"alt\", \"Pond\", 1, \"leftImage\"], [\"id\", \"HedgehogDistance\", 1, \"hiddenElem\"], [\"src\", \"/assets/advice_box_images/Erinaceus_europaeus.jpeg\", \"alt\", \"Hedgehog\", 1, \"leftImage\"]],\n    template: function NearYouComponentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"img\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"p\", 4);\n        i0.ɵɵtext(5, \"Work with Your Local Area!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"p\", 5);\n        i0.ɵɵtext(7, \" If you can convince your neighbours to make changes with you, you can create larger habitats for your local wildlife. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 1);\n        i0.ɵɵelementStart(11, \"div\", 3);\n        i0.ɵɵelementStart(12, \"p\", 4);\n        i0.ɵɵtext(13, \"Some Things People are Doing Near You!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"p\", 5);\n        i0.ɵɵtext(15, \" See what people in your local area have saved- by doing the same in your garden you may be able to support their work making your neighbourhood a thriving area for wildlife! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 7);\n        i0.ɵɵelementStart(17, \"div\", 8);\n        i0.ɵɵelementStart(18, \"div\", 9);\n        i0.ɵɵelement(19, \"img\", 10);\n        i0.ɵɵelementStart(20, \"p\", 11);\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 12);\n        i0.ɵɵelementStart(23, \"div\", 9);\n        i0.ɵɵelement(24, \"img\", 10);\n        i0.ɵɵelementStart(25, \"p\", 11);\n        i0.ɵɵtext(26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 13);\n        i0.ɵɵelementStart(28, \"div\", 9);\n        i0.ɵɵelement(29, \"img\", 10);\n        i0.ɵɵelementStart(30, \"p\", 11);\n        i0.ɵɵtext(31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\", 14);\n        i0.ɵɵelementStart(34, \"div\", 1);\n        i0.ɵɵelement(35, \"img\", 15);\n        i0.ɵɵelementStart(36, \"div\", 3);\n        i0.ɵɵelementStart(37, \"p\", 4);\n        i0.ɵɵtext(38, \"Someone within your local area has put in a pond!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"p\", 5);\n        i0.ɵɵtext(40, \" Being able to travel between garden ponds is great for aquatic animals because if they are able to get access to multiple ponds they are more able to build healthy populations. It looks like someone in your neighbourhood had put in a pond. That means if you do the same thing, you could potentially help out local animals together! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"div\", 16);\n        i0.ɵɵelementStart(43, \"div\", 1);\n        i0.ɵɵelement(44, \"img\", 17);\n        i0.ɵɵelementStart(45, \"div\", 3);\n        i0.ɵɵelementStart(46, \"p\", 4);\n        i0.ɵɵtext(47, \" Someone within your local area has put in a hedgehog hole! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"p\", 5);\n        i0.ɵɵtext(49, \" Hedgehogs often get trapped in gardens because fences make it impossible for them to roam around. Our data suggests that someone in your neighbourhood had put in a hedgehog hole. That means if you do the same thing, you could potentially help out your local hedgehogs together! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(50, \"br\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.displayArray[0].Pathname, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.displayArray[0].Header);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.displayArray[1].Pathname, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.displayArray[1].Header);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.displayArray[2].Pathname, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.displayArray[2].Header);\n      }\n    },\n    styles: [\".hiddenElem[_ngcontent-%COMP%]{display:none}div.item[_ngcontent-%COMP%]{vertical-align:top;display:inline-block;text-align:center;width:200px}div.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;object-fit:none;height:200px;border-radius:50%}.caption[_ngcontent-%COMP%]{display:block;font-family:Playfair Display,serif;font-size:19px}.leftImage[_ngcontent-%COMP%]{object-fit:none;height:200px;width:200px}.card[_ngcontent-%COMP%]{flex-direction:row}.cardElements[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}#SingleAdvice0[_ngcontent-%COMP%], #SingleAdvice1[_ngcontent-%COMP%], #SingleAdvice2[_ngcontent-%COMP%]{margin:5px}@media screen and (max-width: 600px){.card[_ngcontent-%COMP%]{flex-direction:column}.leftImage[_ngcontent-%COMP%]{object-fit:fill;height:auto;width:auto;border-top-left-radius:.25rem;border-top-right-radius:.25rem;border-bottom-left-radius:0rem}}\"]\n  });\n  return NearYouComponentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}